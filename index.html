<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Halloween Store</title>
	<link rel="stylesheet" href="styles/final.css">
	
	<script src="http://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="js/jquery.slicknav.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			$('#nav_menu').slicknav({prependTo:"#mobile_menu"});
		});
	</script>
</head>

<body> 
	<div class="grid">
		<div>
            <div>
                <iframe class="latestVideoEmbed" vnum='0' cid="UCDl7VmS3gD2BQBVZUlL21-A"?autoplay=1'&control=1 width="600" height="340" frameborder="0" allowfullscreen></iframe>
                <p id="video-title">Lorem ipsum</p>
                </div>

  </div>
		<div><iframe width="560" height="315" src="https://www.youtube.com/embed/p1PdimyLk1Y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
    
		<div> <iframe src="https://www.youtube.com/embed/NJH-YQyVjiQ" width="100%" height="100%" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>â€‹ </div>
    
		<div> <iframe src="https://www.youtube.com/embed/wd2sJFrg76c" width="100%" height="100%" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> </div>
    
		<div><iframe src="https://www.youtube.com/embed/6v2L2UGZJAM?rel=0&amp;showinfo=0" width="100%" height="100%" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></div>
    
		<div><iframe src="https://www.youtube.com/embed/6v2L2UGZJAM?rel=0&amp;showinfo=0" width="100%" height="100%" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></div>
	</div>
    <script>const requestOptions = {
        method: 'GET',
        redirect: 'follow'
    };
    
    const loadVideo = (iframe) => {
        const cid = iframe.getAttribute('cid');
        const channelURL = encodeURIComponent(`https://www.youtube.com/feeds/videos.xml?channel_id=${cid}`)
        const reqURL = `https://api.rss2json.com/v1/api.json?rss_url=${channelURL}`;
        fetch(reqURL, requestOptions)
            .then(response => response.json())
            .then(result => {
                const videoNumber = (iframe.getAttribute('vnum') ? Number(iframe.getAttribute('vnum')) : 0);
                const link = result.items[videoNumber].link;
                const id = link.substr(link.indexOf("=") + 1);
                iframe.setAttribute("src", `https://youtube.com/embed/${id}?controls=0&autoplay=1`);
            })
            .catch(error => console.log('error', error));
    }
    var iframes = document.getElementsByClassName('latestVideoEmbed');
    for (var i = 0, len = iframes.length; i < len; i++) {
        loadVideo(iframes[i]);
    }</script>
</body>
</html>
